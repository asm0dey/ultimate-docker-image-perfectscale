import{_ as h}from"./slidev/VClick-BlNSFQXA.js";import{_ as d}from"./slidev/CodeBlockWrapper.vue_vue_type_script_setup_true_lang-BSPYQ3ey.js";import{b as o,o as D,w as l,g as i,e as t,m as g,ae as s,v as E,x as m,U as n}from"./modules/vue-TfHnO_l5.js";import{I as c}from"./slidev/default-Bdxe0J_P.js";import{u,f as y}from"./slidev/context-DNKlNMmK.js";import"./index--G_N8TOg.js";import"./modules/shiki-rs0Z6--w.js";import"./slidev/VClicks-CnkbYHBD.js";import"./modules/unplugin-icons-U4-PVuOc.js";import"./slidev/TitleIcon.vue_vue_type_script_setup_true_lang-uPqfcjtK.js";const R={__name:"slides.md__slidev_20",setup(A){const{$clicksContext:r,$frontmatter:k}=u();return r.setup(),(C,a)=>{const p=d,e=h;return D(),o(c,E(m(n(y)(n(k),19))),{default:l(()=>[a[4]||(a[4]=i("h1",null,"Layers!",-1)),t(p,g({maxHeight:"180px"},{title:"",ranges:["1-4","6","8,9","10","12,6","15-18","14"]}),{default:l(()=>[...a[0]||(a[0]=[i("pre",{class:"shiki shiki-themes vitesse-dark vitesse-light slidev-code",style:{"--shiki-dark":"#dbd7caee","--shiki-light":"#393a34","--shiki-dark-bg":"#121212","--shiki-light-bg":"#ffffff"}},[i("code",{class:"language-docker"},[i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"FROM"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," bellsoft/liberica-runtime-container:jdk-musl "),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"as"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," builder")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," . /app")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"RUN"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," cd /app && ./gradlew build -xtest")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"FROM"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," bellsoft/liberica-runtime-container:jre-slim-musl "),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"as"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," optimizer")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=builder /app/build/libs/spring-petclinic-3.3.0.jar /app/app.jar")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"WORKDIR"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," /app")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"RUN"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," java -Djarmode=tools -jar /app/app.jar extract --layers --destination extracted")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"FROM"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," bellsoft/liberica-runtime-container:jre-slim-musl "),i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"as"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," runner")]),s(`
`),i("span",{class:"line"}),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"ENTRYPOINT"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," ["),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},'"java"'),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},", "),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},'"-jar"'),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},", "),i("span",{style:{"--shiki-dark":"#C98A7D","--shiki-light":"#B56959"}},'"./app/spring-petclinic.jar"'),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}},"]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=optimizer /app/extracted/dependencies/ ./")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=optimizer /app/extracted/spring-boot-loader/ ./")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=optimizer /app/extracted/snapshot-dependencies/ ./")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-dark":"#4D9375","--shiki-light":"#1E754F"}},"COPY"),i("span",{style:{"--shiki-dark":"#DBD7CAEE","--shiki-light":"#393A34"}}," --from=optimizer /app/extracted/application/ ./")])])],-1)])]),_:1},16),a[5]||(a[5]=i("ul",null,[i("li",null,"Build image")],-1)),t(e,{at:"1"},{default:l(()=>[...a[1]||(a[1]=[i("ul",null,[i("li",null,'Introduce new "optimizer" stage')],-1)])]),_:1}),t(e,{at:"3"},{default:l(()=>[...a[2]||(a[2]=[i("ul",null,[i("li",null,"Extract the jar to layered structure")],-1)])]),_:1}),t(e,{at:"5"},{default:l(()=>[...a[3]||(a[3]=[i("ul",null,[i("li",null,"Copy layers")],-1)])]),_:1})]),_:1},16)}}};export{R as default};
